apiVersion: v1
kind: ConfigMap
metadata:
  name: caddyfile-config
data:
  Caddyfile: |
    http://kavita.kanbaru.home {
      encode gzip
      reverse_proxy /* kavita:5000 {
        header_up X-Forwarded-Host {host}:5000
        header_up -Origin
        header_up -Referer
      }
    }

    http://nextcloud.kanbaru.home {
      reverse_proxy /* nextcloud:80 {
        header_up X-Forwarded-Host {host}:80
        header_up -Origin
        header_up -Referer
      }
    }

    http://sonarr.kanbaru.home {
      reverse_proxy /* sonarr:80 {
        header_up X-Forwarded-Host {host}:80
        header_up -Origin
        header_up -Referer
      }
    }
